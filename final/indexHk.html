<!DOCTYPE html>
<html>
<head>
  <title>the life</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">

  <style type="text/css">
    
      #map {
        height: 100%;
      }

      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }


  </style>

  <script type="text/javascript" src="assets/jquery-3.3.1.min.js"></script>

</head>
<body>
  <div id="map">

    
  </div><!-- 
    <div id="mapHk"></div> -->
    <script>

      // pull map out & styling
      var map, infoWindow;


      // BUTTON: fly to HK
      var hongKong = {lat: 22.288049, lng: 114.172271};
      function CenterControl(controlDiv, map) {
        // styling for the control border
        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = '#fff';
        controlUI.style.border = '2px solid #fff';
        controlUI.style.borderRadius = '3px';
        controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginBottom = '22px';
        controlUI.style.marginRight = '10px';
        controlUI.style.marginTop = '10px';
        controlUI.style.textAlign = 'center';
        controlUI.title = 'Click to recenter the map';
        controlDiv.appendChild(controlUI);

        // css style for the control interior.
        var controlText = document.createElement('div');
        controlText.style.color = 'rgb(25,25,25)';
        controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
        controlText.style.fontSize = '16px';
        controlText.style.lineHeight = '38px';
        controlText.style.paddingLeft = '5px';
        controlText.style.paddingRight = '5px';
        controlText.innerHTML = 'Hong Kong';
        controlUI.appendChild(controlText);

        // setup the click event listeners: switch visualization
        controlUI.addEventListener('click', function() {
          window.location.href = './indexHk.html';
        });
      };


      // BUTTON: fly back to NY
      // var newYorkCity = {lat: 40.749759, lng: -73.991830};
      function CenterNyControl(controlDiv, map) {
        // CSS for the control border
        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = '#fff';
        controlUI.style.border = '2px solid #fff';
        controlUI.style.borderRadius = '3px';
        controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginBottom = '22px';
        controlUI.style.marginRight = '10px';
        controlUI.style.marginTop = '10px';
        controlUI.style.textAlign = 'center';
        controlUI.title = 'Click to recenter the map';
        controlDiv.appendChild(controlUI);

        // css style for the control interior.
        var controlText = document.createElement('div');
        controlText.style.color = 'rgb(25,25,25)';
        controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
        controlText.style.fontSize = '16px';
        controlText.style.lineHeight = '38px';
        controlText.style.paddingLeft = '5px';
        controlText.style.paddingRight = '5px';
        controlText.innerHTML = 'New York';
        controlUI.appendChild(controlText);

        // setup the click event listeners: switch visualization
        controlUI.addEventListener('click', function() {
          window.location.href = '/index.html';
        });

      }

      // BUTTON: zoom in (16)
      function zoomControl(controlDiv, map) {
        // CSS for the control border
        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = '#fff';
        controlUI.style.border = '2px solid #fff';
        controlUI.style.borderRadius = '3px';
        controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginBottom = '30px';
        controlUI.style.marginRight = '5px';

        controlUI.style.textAlign = 'center';
        controlUI.title = 'Click to recenter the map';
        controlDiv.appendChild(controlUI);

        // css style for the control interior.
        var controlText = document.createElement('div');
        controlText.style.color = 'rgb(25,25,25)';
        controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
        controlText.style.fontSize = '25px';
        controlText.style.lineHeight = '38px';
        controlText.style.paddingLeft = '10px';
        controlText.style.paddingRight = '10px';
        controlText.innerHTML = '+';
        controlUI.appendChild(controlText);

        // setup the click event listeners: switch visualization
        controlUI.addEventListener('click', function() {
          map.setZoom(15);
        });

      }
      //BUTTON: zoom out (15)
      function zoomControlMinus(controlDiv, map) {
        // CSS for the control border
        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = '#fff';
        controlUI.style.border = '2px solid #fff';
        controlUI.style.borderRadius = '3px';
        controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginBottom = '30px';
        controlUI.style.marginRight = '5px';

        controlUI.style.textAlign = 'center';
        controlUI.title = 'Click to recenter the map';
        controlDiv.appendChild(controlUI);

        // css style for the control interior.
        var controlText = document.createElement('div');
        controlText.style.color = 'rgb(25,25,25)';
        controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
        controlText.style.fontSize = '25px';
        controlText.style.lineHeight = '38px';
        controlText.style.paddingLeft = '15px';
        controlText.style.paddingRight = '15px';
        controlText.innerHTML = '-';
        controlUI.appendChild(controlText);

        // setup the click event listeners: switch visualization
        controlUI.addEventListener('click', function() {
          map.setZoom(14);
        });

      }

      // POPULATION CIRCLES
      var populationmapHk = {
        ifc: {
          center: {lat: 22.285597, lng: 114.158312},
          population: 5,
          name: "ifc",
          info: "less populated"
        },
        festi: {
          center: {lat: 22.337490, lng: 114.174694},
          population: 15,
          name: "festi",
          info: "very populated"          
        },
        lkf: {
          center: {lat: 22.281064, lng: 114.155597},
          population: 20,
          name: "lkf",
          info: "moderately populated"
        },
        cwb: {
          center: {lat: 22.278773, lng: 114.182630},
          population: 10,
          name: "cwb",
          info: "extremely populated"          
        },
        mk: {
          center: {lat: 22.319158, lng: 114.167907},
          population: 13,
          name: "mk",
          info: "moderately populated"          
        },
        admiralty: {
          center: {lat: 22.279796, lng: 114.1646},
          population: 20,
          name: "admiralty",
          info: "less populated"
        },
        tst: {
          center: {lat: 22.297623, lng: 114.169452},
          population: 13,
          name: "tst",
          info: "extremely populated"
        }
      };

      // var hongKong = {lat: 22.288049, lng: 114.172271};
      // CREATE MAP
      function initMapHk() {
        // (day)standard map
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 22.288049, lng: 114.172271},
          zoom: 14,
          gestureHandling: 'cooperative',
          streetViewControl: false,
          mapTypeControl: true,
          fullscreenControl: false,
          zoomControl: false,
          mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
            mapTypeIds: ['roadmap', 'styled_map']
          },
          styles: [
            {
                "featureType": "administrative",
                "elementType": "labels.text.fill",
                "stylers": [
                    { "color": "#444444" }
                ]
            },
            {
                "featureType": "landscape",
                "elementType": "all",
                "stylers": [
                    { "color": "#f2f2f2" }
                ]
            },
            {
                "featureType": "poi",
                "elementType": "all",
                "stylers": [
                    { "visibility": "off" }
                ]
            },
            {
                "featureType": "road",
                "elementType": "all",
                "stylers": [
                    { "saturation": -100 },
                    { "lightness": 45 }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "all",
                "stylers": [
                    { "visibility": "simplified" }
                ]
            },
            {
                "featureType": "road.highway",
                "elementType": "geometry.fill",
                "stylers": [
                    { "color": "#ffffff" }
                ]
            },
            {
                "featureType": "road.arterial",
                "elementType": "labels.icon",
                "stylers": [
                    { "visibility": "off" }
                ]
            },
            {
                "featureType": "transit",
                "elementType": "all",
                "stylers": [
                    { "visibility": "off" }
                ]
            },
            {
                "featureType": "water",
                "elementType": "all",
                "stylers": [
                    { "color": "#dde6e8" },
                    { "visibility": "on" }
                ]
            }
          ],

        });

        // console.log(map.getCenter());


         // BOUNDS for Hong Kong
         var allowedBounds = new google.maps.LatLngBounds(
           new google.maps.LatLng(22.250583, 114.146952), 
           new google.maps.LatLng(22.399905, 114.220205)
          );

         // Listen for the dragend event
         google.maps.event.addListener(map, 'dragend', function() {
           if (allowedBounds.contains(map.getCenter())) return;

           // Out of bounds - Move the map back within the bounds
           var c = map.getCenter(),
               x = c.lng(),
               y = c.lat(),
               maxX = allowedBounds.getNorthEast().lng(),
               maxY = allowedBounds.getNorthEast().lat(),
               minX = allowedBounds.getSouthWest().lng(),
               minY = allowedBounds.getSouthWest().lat();

           if (x < minX) x = minX;
           if (x > maxX) x = maxX;
           if (y < minY) y = minY;
           if (y > maxY) y = maxY;

           map.setCenter(new google.maps.LatLng(y, x));
         });

         console.log(map.getCenter())

         
      //nightmode styled map
      var styledMapType = new google.maps.StyledMapType(
        [ 
          {
              "featureType": "all",
              "elementType": "geometry",
              "stylers": [
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "all",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "color": "#ffffff"
                  },
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "all",
              "elementType": "labels.icon",
              "stylers": [
                  {
                      "visibility": "simplified"
                  },
                  {
                      "hue": "#ff0000"
                  }
              ]
          },
          {
              "featureType": "administrative",
              "elementType": "labels",
              "stylers": [
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "landscape",
              "elementType": "geometry",
              "stylers": [
                  {
                      "color": "#545b6b"
                  }
              ]
          },
          {
              "featureType": "landscape",
              "elementType": "geometry.stroke",
              "stylers": [
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "poi",
              "elementType": "labels.icon",
              "stylers": [
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "poi.attraction",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "poi.business",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "poi.business",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "visibility": "simplified"
                  },
                  {
                      "color": "#ffffff"
                  }
              ]
          },
          {
              "featureType": "poi.business",
              "elementType": "labels.icon",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "poi.government",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "poi.medical",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "poi.medical",
              "elementType": "geometry",
              "stylers": [
                  {
                      "color": "#232e34"
                  }
              ]
          },
          {
              "featureType": "poi.medical",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "color": "#ffffff"
                  },
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "poi.park",
              "elementType": "geometry",
              "stylers": [
                  {
                      "invert_lightness": true
                  },
                  {
                      "color": "#333138"
                  }
              ]
          },
          {
              "featureType": "poi.park",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "color": "#ffffff"
                  },
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "poi.place_of_worship",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "poi.school",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "poi.school",
              "elementType": "geometry",
              "stylers": [
                  {
                      "color": "#302f3a"
                  }
              ]
          },
          {
              "featureType": "poi.school",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "color": "#ffffff"
                  },
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "poi.sports_complex",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "poi.sports_complex",
              "elementType": "geometry",
              "stylers": [
                  {
                      "color": "#302f3a"
                  }
              ]
          },
          {
              "featureType": "poi.sports_complex",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "color": "#ffffff"
                  }
              ]
          },
          {
              "featureType": "road",
              "elementType": "geometry",
              "stylers": [
                  {
                      "color": "#414959"
                  },
                  {
                      "visibility": "on"
                  }
              ]
          },
          {
              "featureType": "road",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "visibility": "simplified"
                  },
                  {
                      "color": "#ffffff"
                  }
              ]
          },
          {
              "featureType": "road",
              "elementType": "labels.icon",
              "stylers": [
                  {
                      "visibility": "on"
                  }
              ]
          },
          {
              "featureType": "road.highway",
              "elementType": "labels.icon",
              "stylers": [
                  {
                      "visibility": "on"
                  }
              ]
          },
          {
              "featureType": "road.local",
              "elementType": "geometry.fill",
              "stylers": [
                  {
                      "lightness": "2"
                  }
              ]
          },
          {
              "featureType": "road.local",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "lightness": "19"
                  }
              ]
          },
          {
              "featureType": "road.local",
              "elementType": "labels.text.fill",
              "stylers": [
                  {
                      "lightness": "-40"
                  },
                  {
                      "saturation": "-8"
                  }
              ]
          },
          {
              "featureType": "transit.station",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "transit.station.airport",
              "elementType": "all",
              "stylers": [
                  {
                      "visibility": "off"
                  }
              ]
          },
          {
              "featureType": "transit.station.airport",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "color": "#ffffff"
                  },
                  {
                      "visibility": "simplified"
                  }
              ]
          },
          {
              "featureType": "water",
              "elementType": "geometry",
              "stylers": [
                  {
                      "color": "#2e3545"
                  }
              ]
          },
          {
              "featureType": "water",
              "elementType": "labels.text",
              "stylers": [
                  {
                      "visibility": "simplified"
                  },
                  {
                      "color": "#ffffff"
                  }
              ]
          }
        ],
        {name: 'Night Mode'});
        
        //setting style map in mapTypes
        var typeIdChangedInCode = false;
        map.mapTypes.set('styled_map', styledMapType);
        typeIdChangedInCode = true;
        map.setMapTypeId('styled_map');
        map.mapTypes.set('roadmap');
        map.setMapTypeId('roadmap');
        infoWindow = new google.maps.InfoWindow;


        for (var city in populationmapHk) {
          // Add the circle for this city to the map.
          var cityCircle = new google.maps.Circle({
            strokeColor: 'teal',
            strokeOpacity: 0.8,
            strokeWeight: 3,
            fillColor: 'pink',
            fillOpacity: 0.35,
            map: map,
            visible: true,
            center: populationmapHk[city].center,
            radius: Math.sqrt(populationmapHk[city].population) * 100
          });


        }

      // CONTROLS: 
        // create div control logo
        var centerControlDiv = document.createElement('div');
        var centerControl = new CenterControl(centerControlDiv, map);

        centerControlDiv.index = 1;
        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(centerControlDiv);

        // create div for back to NY
        var centerNyControlDiv = document.createElement('div');
        var centerNyControl = new CenterNyControl(centerNyControlDiv, map);

        centerNyControlDiv.index = 1
        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(centerNyControlDiv)

        // create zoom buttons (ZOOM IN)
        var zoomCloseDiv = document.createElement('div');
        var zoomClose = new zoomControl(zoomCloseDiv, map);

        zoomCloseDiv.index = 1
        map.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(zoomCloseDiv);

        // create zoom buttons (ZOOM OUT)
        var zoomFarDiv = document.createElement('div');
        var zoomFar = new zoomControlMinus(zoomFarDiv, map);

        zoomFarDiv.index = 1
        map.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(zoomFarDiv);

        /* Change markers on zoom */
        google.maps.event.addListener(map, 'zoom_changed', function() {
            var zoom = map.getZoom();
            var zoomTwo = map.getZoom();
            // iterate over markers and call setVisible
            for (i = 0; i < locations.length; i++) {
                markers[i].setVisible(zoom >= 14);
            }

            for (k = 0; k < locationsFlag.length; k++) {
                  markerFlags[k].setVisible(zoom >= 14);
            }

        });


      // PEOPLE STORIES
        // pull src
        var pplOrangeArmOpen = 'jpeg/ppl_2.svg';
        var pplSusan = 'jpeg/ppl_15.svg';
        var pplPinkSkate = 'jpeg/people_4.svg';
        var pplYellowStretch = 'jpeg/people_1.svg';
        var pplTankYellowPants = 'jpeg/ppl_13.svg';
        var pplOrangeWave = 'jpeg/people_3.svg';
        var pplPurpleDress = 'jpeg/ppl_14.svg';
        var pplPurpleArmOpen = 'jpeg/ppl_11.svg';
        var pplJumpRope = 'jpeg/ppl_10.svg';
        var pplBench = 'jpeg/ppl_9.svg';
        var pplPickFlower = 'jpeg/ppl_8.svg';
        var pplSoccer = 'jpeg/ppl_7.svg';
        var pplBag = 'jpeg/ppl_6.svg';
        var pplHandStand = 'jpeg/ppl_5.svg';

        // create markers and pair it with infowindow content
        var marker, i;
        var markers = [];
        var locations = [
            ['<div style="width: 200px;"><h1 id="Heading" class="Heading">This is Tommy</h1>He stands by Taco Bell greeting customers, wishing them a good day andsimultaneously hoping to receive some spare change.</div></b>', 40.735495, -73.993906, pplTom],
            ['<div style="width: 200px;"><h1 id="Heading" class="Heading">This is Susan</h1>She often drops by Dainobu to get chicken teriyaki with rice.</b></div>', 40.737076, -73.995618, pplSusan],
            ['<div style="width: 200px;"><h1 id="Heading" class="Heading">This is Jim</h1>He comes to Union Square every day and practice his skateboard tricks, giving everyone around him a heart attack.</b>', 40.736381, -73.990427, pplJim],
            ['<div style="width: 200px;"><h1 id="Heading" class="Heading">Say hi to Katie!</h1>She wakes up at 5:40am every morning to do her morning strestch next to her blossom tree.</b></div>', 40.747259, -73.979892, pplKatie],
            ['<div style="width: 200px;"><h1 id="Heading" class="Heading">This is Stephanie</h1>She often take trips to Chinatown for food adventures.</b>', 40.717564, -73.998614, pplJim],
            ['<div style="width: 200px;"><h1 id="Heading" class="Heading">Say hello to Rachel</h1>She pops by and meets up with Stephanie for dessert.</b>', 40.720401, -73.995322, pplSusan],
            ['<div style="width: 200px;"><h1 id="Heading" class="Heading">This is Leo.</h1>He lives above one of the oldest Duane Reede store, watching the dogs by his window.</b>', 40.727300, -73.980021, pplTom],
            ['<div style="width: 200px;"><h1 id="Heading" class="Heading">Isabelle here!</h1>People adore her and her laugh. You will be able to spot her from a mile away.</b>', 40.730138, -74.005331, pplKatie],

        ];

        //add content for quotes ((infowindow))
        var contentStringTommy = '<div id="content">'+
            '<div id="quote">'+
            '</div>'+
            '<h1 id="Heading" class="Heading">This is Tommy</h1>'+
            '<div id="bodyContent">'+
            '<p><b>He stands by Taco Bell greeting customers, wishing them a good day andsimultaneously hoping to receive some spare change.</b>'
            ;

        var contentStringJim = '<div id="content">'+
            '<div id="quote">'+
            '</div>'+
            '<h1 id="Heading" class="Heading">This is Jim</h1>'+
            '<div id="bodyContent">'+
            '<p><b>He comes to Union Square every day and practice his skateboard tricks, giving everyone around him a heart attack.</b>'
            ;

        var contentStringKatie = '<div id="content">'+
          '<div id="quote">'+
          '</div>'+
          '<h1 id="Heading" class="Heading">Say hello to Katie!</h1>'+
          '<div id="bodyContent">'+
          '<p><b>She wakes up at 5:40am every morning to do her morning strestch next to her blossom tree.</b>'
          ;

        var contentStringSusan = '<div id="content">'+
          '<div id="quote">'+
          '</div>'+
          '<h1 id="Heading" class="Heading">This is Susan, people adore her.</h1>'+
          '<div id="bodyContent">'+
          '<p><b>She often drops by Dainobu to get chicken teriyaki with rice.</b>'
          ;

        var contentStringSteph = '<div id="content">'+
          '<div id="quote">'+
          '</div>'+
          '<h1 id="Heading" class="Heading">This is Stephanie</h1>'+
          '<div id="bodyContent">'+
          '<p><b>She often take trips to Chinatown for food adventures.</b>'
          ;

       var contentStringRachel = '<div id="content">'+
          '<div id="quote">'+
          '</div>'+
          '<h1 id="Heading" class="Heading">Say hello to Rachel!</h1>'+
          '<div id="bodyContent">'+
          '<p><b>She always walks along this street pops to meet up with Stephanie for dessert.</b>'
          ;
        var contentStringLeo = '<div id="content">'+
          '<h1 id="Heading" class="Heading">This is Leo</h1>'+
          '<div id="bodyContent">'+
          '<p><b>He lives above one of the oldest Duane Reede store, watching the dogs by his window.</b>'
          ;
         var contentStringIs = '<div id="content">'+
          '<h1 id="Heading" class="Heading">Isabelle here!</h1>'+
          '<div id="bodyContent">'+
          '<p><b>Seople adore her and her laugh. You will be able to spot her from a mile away.</b></p></div>'
          ;

        var infoArray = [
          contentStringTommy, contentStringJim, contentStringKatie, contentStringSusan, contentStringRachel, contentStringSteph, contentStringLeo, contentStringIs
        ];
        var infowindowArray = new google.maps.InfoWindow();

       // get the markers from the array 
        for (i = 0; i < locations.length; i++) {  
          marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]), 
            map: map,
            visible: false, // or false. Whatever you need.
            icon: locations[i][3],
            zIndex: 10
          }); 

          // open marker on mouseover
          google.maps.event.addListener(marker, 'click', (function(marker, i) {
          return function() {
              infowindowArray.setContent(locations[i][0]);
              infowindowArray.open(map, marker);
          }
          })(marker, i));
          markers.push(marker); // save all markers
        };


        // housing the quotes ((infowindow))
        var infowindowTommy = new google.maps.InfoWindow({
          content: contentStringTommy,
          maxWidth: 200
        });

        var infowindowJim = new google.maps.InfoWindow({
          content: contentStringJim,
          maxWidth: 200
        });

        var infowindowKatie = new google.maps.InfoWindow({
          content: contentStringKatie,
          maxWidth: 200
        });

        var infowindowSusan = new google.maps.InfoWindow({
          content: contentStringSusan,
          maxWidth: 200
        });



        // FLAG MARKERS
        var flag = 'jpeg/flag_2.svg';
        var flagStyled = 'jpeg/flag_2_styled.svg';
        var markerFlag, k;
        var markerFlags = [];
        var locationsFlag = [
          ['<div style="width: 200px;"><h3 id="Heading" class="Heading">craving something healthy but also comforting?</h1></div>', 40.753184, -73.985548, flag, 'https://www.jean-georges.com/restaurants/united-states/new-york/abc-kitchen'],
          ['<div style="width: 200px;"><h3 id="Heading" class="Heading">did somebody say mac & cheese?</h1></div>', 40.741126, -73.979632, flag, 'https://thesmithrestaurant.com/'],
           ['<div style="width: 200px;"><h3 id="Heading" class="Heading">pho real?</h1></div>', 40.761996, -73.991368, flag, 'https://www.obaony.com/'],
          ['<div style="width: 200px;"><h3 id="Heading" class="Heading">hazelnut + chocolate is the best combo</h1></div>', 40.737116, -73.991678, flag, 'https://www.yelp.com/biz/nutella-cafe-new-york-3'],
          ['<div style="width: 200px;"><h3 id="Heading" class="Heading">are you ready for a sugar rush?</h1></div>', 40.740012, -74.007478, flag, 'http://sugarfactory.com'],
        ]



        // placing flags
        for (k = 0; k < locationsFlag.length; k++) {  
          markerFlag = new google.maps.Marker({
              position: new google.maps.LatLng(locationsFlag[k][1], locationsFlag[k][2]), 
              map: map,
              visible: false, 
              icon: locationsFlag[k][3],
              zIndex: 9
          }); 

          var contentFlagOne =
          '<div id="content"><h2 id="Heading" class="Heading">craving something healthy but also comforting?</h1></div>' ;
          
          var contentFlagTwo =
          '<div id="content"><h2 id="Heading" class="Heading">did somebody say mac & cheese?</h1></div>';

          var infoArrayFlag = [
              contentFlagTwo, contentFlagOne
          ];

          var infowindowArrayFlag = new google.maps.InfoWindow({
                content: infoArrayFlag[k],
                maxWidth: 200
          });

              /* Open marker on mouseover */
          google.maps.event.addListener(markerFlag, 'mouseover', (function(markerFlag, k) {
          return function() {
              infowindowArrayFlag.setContent(locationsFlag[k][0]);
              infowindowArrayFlag.open(map, markerFlag);

          }
          })(markerFlag, k));
console.log(markerFlags) 
          // click redirect to restaurant link
          google.maps.event.addListener(markerFlag, 'click', (function(markerFlag, k){
              return function() {
                  window.location.href = locationsFlag[k][4];

              }
          })(markerFlag, k));
          markerFlags.push(markerFlag); // save all markers

        };


        // CARS
        var carPath, j;
        var carPaths = [];
        var infowindowCar = new google.maps.InfoWindow;
        // define the symbol of the animating car
        var carSymbol = {
          path: google.maps.SymbolPath.CIRCLE,
          scale: 6,
          
          //ERROR: what is the center of the symbol?
          //center: carSymbol.center,
          
          strokeColor: 'purple'
        };

        //create path of cars
        var carHomeToABC = [
          {lat: 40.741865, lng: -73.986307},
          {lat: 40.742158, lng: -73.987052},
          {lat: 40.743383, lng: -73.986180},
          {lat: 40.743383, lng: -73.986180},
          {lat: 40.744075, lng: -73.987755},
          {lat: 40.742387, lng: -73.988957},
          {lat: 40.739182, lng: -73.989752},
          {lat: 40.738344, lng: -73.987789},
          {lat: 40.737772, lng: -73.988212},
          {lat: 40.738248, lng: -73.989372}
        ];

        var carMad = [
          {lat: 40.750474, lng: -73.999122},
          {lat: 40.748016, lng: -73.992853},
          {lat: 40.753441, lng: -73.988836},
          {lat: 40.757276, lng: -73.986091},
          {lat: 40.755540, lng: -73.981721}
        ];

        var carArray = [
          carHomeToABC, carMad
        ];

        var carQuotes = [
          'are you kidding me?', 'dude we are going to be late!'
        ];

        var carCenter = [
          {lat: 40.743383, lng: -73.986180},
          {lat: 40.753441, lng:-73.988836}
        ];

        for (j = 0; j < carArray.length; j++) {  
          carPath = new google.maps.Polyline({
            path: carArray[j], 
            geodesic: true,
            strokeColor: 'navy',
            strokeOpacity: 1.0,
            strokeWeight: 3,
            center: carCenter[j],
            info: carQuotes[j],
            icons: [{
              icon: carSymbol,
              offset: '100%'
            }]
          }); 

          google.maps.event.addListener(carPath, 'mouseover', (function(carPath, j) {
            return function() {
                  infowindowCar.setContent(carQuotes[j]);
                  infowindowCar.setPosition(carCenter[j]);
                  infowindowCar.open(map, carPath);
                   console.log('mouseover!')
            };
          })(carPath, j));

          carPaths.push(carPath);

          carPath.setMap(map);
          animateCar(carPath);


          //when maptypeid is changed
          google.maps.event.addListener( map, 'maptypeid_changed', function(evnt) { 
                if ( typeIdChangedInCode ) {
                    for(var i = 0; i < carPaths.length; i++){
                      carPaths[i].setOptions({
                          strokeColor: 'yellow'
                      });           
                    }
                    for(var i = 0; i < markerFlags.length; i++){
                        markerFlags[i].setOptions({
                            icon: flagStyled
                        });                    
                    }
                    for(var i = 0; i < bikePaths.length; i++){
                        bikePaths[i].setOptions({
                            strokeColor: 'orange'
                        }); 
                    }  
                }
                else if (typeIdChangedInCode = false){
                    for(var i = 0; i < carPaths.length; i++){
                      carPaths[i].setOptions({
                          strokeColor: 'black'
                      });           
                    }
                    for(var i = 0; i < markerFlags.length; i++){
                        markerFlags[i].setOptions({
                            icon: flagStyled
                        });                    
                    }
                    for(var i = 0; i < bikePaths.length; i++){
                        bikePaths[i].setOptions({
                            strokeColor: 'white'
                        }); 
                    }  
                }
                else{}
          } );

        // setInterval() to change symbol at fixed intervals
          function animateCar(carPath) {
              var count = 0;
              window.setInterval(function() {
                count = (count + 1) % 200;

                var icons = carPath.get('icons');
                icons[0].offset = (count / 2) + '%';
                carPath.set('icons', icons);

              }, 80);
          };
        };
      

        // BIKE
        var bikePath, l;
        var bikePaths = [];
        var infowindowBike = new google.maps.InfoWindow;
        var bikeDash = {
                  path: 'M 0,-1 0,1',
                  strokeOpacity: 1,
                  scale: 4
        };

        var bikeOne = [
          {lat: 40.750644, lng: -73.989793},
          {lat: 40.748424, lng: -73.984600},
          {lat: 40.747721, lng: -73.984977},
          {lat: 40.746446, lng: -73.981729}
        ];

        var bikeTwo = [
          {lat: 40.732920, lng: -73.983821},
          {lat: 40.732790, lng: -73.987619},
          {lat: 40.735771, lng: -73.994692}
        ];

        var bikeArray = [
          bikeOne, bikeTwo
        ];

        var bikeQuotes = [
          'what the f* do you think you"re doing?', 'crap i forgot my portfolio'
        ];

        var bikeCenter = [
          {lat:40.748424, lng: -73.984600},
          {lat:40.732533, lng: -73.985357},
        ];

        for (l = 0; l < bikeArray.length; l++) {
          bikePath = new google.maps.Polyline({
            path: bikeArray[l],
            strokeOpacity: 0,
            icons: [{
              icon: bikeDash,
              offset: '0',
              repeat: '20px'
            }],
            map: map,
            info: bikeQuotes[l],
            center: bikeCenter[l]
          });


          bikePath.setMap(map);
          // setTimeout(function() {
            bikePaths.push(bikePath);
            infowindowBike.setContent(bikeQuotes[l]);
            infowindowBike.open(map, bikePath[l]);
            infowindowBike.setPosition(bikeCenter[l]);
            // bikePath.setMap(map);
            
          // }, 3000);
          animateBike(bikePath);
          // animateBike(infowindowBike);


        // setInterval() to change the offset of the symbol at fixed intervals.
          function animateBike(bikePath) {
            var count = 0;
            window.setInterval(function() {
              count = (count + 1) % 200;

              var iconsBike = bikePath.get('icons');
              iconsBike[0].offset = (count / 2) + '%';
              bikePath.set('icons', iconsBike);

          }, 80);
        };


        // ERROR generate random placement and quantity of trees
        var trees = 'jpeg/tree_1.svg';

      };
    }

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDRjjJm4QxHyNT9Ji7CUsCDA94jo_XZvco&callback=initMapHk">
    </script>

    
</body>
</html>